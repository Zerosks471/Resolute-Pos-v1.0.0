<!-- Only show navigation for authenticated routes -->
@if (router.url !== '/login' && router.url !== '/unauthorized') {
  <div class="app-container">
    <!-- Combined Toolbar with Tabs and Utilities -->
    <mat-toolbar class="pos-navbar" color="primary">
      <!-- Left: Navigation Tabs -->
      <mat-tab-group
        [selectedIndex]="selectedTabIndex()"
        (selectedIndexChange)="onTabChange($event)"
        class="nav-tabs"
      >
        @for (item of navItems; track item.route) {
          <mat-tab>
            <ng-template mat-tab-label>
              <mat-icon>{{ item.icon }}</mat-icon>
              <span>{{ item.label }}</span>
              @if (item.badge && item.badge() > 0) {
                <span class="tab-badge">{{ item.badge() }}</span>
              }
            </ng-template>
          </mat-tab>
        }
      </mat-tab-group>

      <span class="spacer"></span>

      <!-- Right: Utilities -->
      <div class="navbar-utilities">
        <div class="time-date">
          <span class="time">{{ currentTime() }}</span>
          <span class="date">{{ currentDate() }}</span>
        </div>
        @if (currentUser$ | async; as user) {
          <span class="user-name">{{ user.name }}</span>
        }
        <button
          mat-icon-button
          (click)="logout()"
          aria-label="Logout"
          class="logout-button"
        >
          <mat-icon>logout</mat-icon>
        </button>
      </div>
    </mat-toolbar>

    <!-- Main Content -->
    <div class="main-content">
      <router-outlet></router-outlet>
    </div>
  </div>
} @else {
  <!-- Login and Unauthorized pages (no navigation) -->
  <router-outlet></router-outlet>
}
